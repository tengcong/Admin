<html>
  <meta name="viewport" content="width=device-width">
  <script type="text/javascript" src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
  <style type="text/css">
  .item{
    float: left;
    width: 300px;
    height: 568px;
    overflow: hidden;
    margin-right: 10px;
    margin-bottom: 15px;
  }

  img{
    width: 300px;
  }

  .clearfix{
    clear: left;
  }

  .photos{
    margin: 0 auto;
    max-width: 940px;
  }

  .next-page{
    float: left;
    width: 100%;
    height: 50px;
    background: lightblue;
    color: white;
    line-height: 50px;
    text-align: center;
    text-decoration: none;
    opacity: 0.5;
  }
  </style>

  <body>
  <div class="photos">
    <% @photos.each do |p| %>
      <div class="item">
        <image src="<%= p.url %>!retina">
      </div>
    <% end %>
    <div class="clearfix"></div>

    <a href="/?offset=<%= (params[:offset].to_i || 0)  + 20 || 0 %>" class="next-page">下一页</a>
  </div>
  </body>

  <script type="text/javascript">
    $(function(){
      $('.del-btn').click(function(e){
        e.preventDefault();
        $this = $(this);
        var id = $(this).data('id');
        $.get('/delete/' + id, function(data){
          res = JSON.parse(data)
          if(res.success){
            $this.parent('.item').remove()
          }
        })
      })
    })
  </script>

</html>
